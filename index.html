<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Teste LocalStorage via postMessage</title>
<style>
body { font-family: monospace; white-space: pre-wrap; }
#saida { margin-top: 1rem; }
</style>
</head>
<body>

<h1>Teste LocalStorage via postMessage</h1>
<div id="saida">⏳ Aguardando dados…</div>

<script>
const saida = document.getElementById("saida");

window.addEventListener("message", (event) => {
  if (!event.data?.type) return;

  if (event.data.type === "AGENDA_DATA") {
    const payload = event.data.payload;
    saida.textContent = `
📅 AGENDA_DATA recebido:

start: ${payload.start}
end: ${payload.end}
eventos:
${JSON.stringify(payload.events, null, 2)}
    `;
  }

  if (event.data.type === "AUTH_USER_DATA") {
    const { authData, userData, anonKey } = event.data.payload;

    saida.textContent += `
\n\n🔐 AUTH_USER_DATA recebido:

anonKey: ${anonKey}

authData:
${JSON.stringify(authData, null, 2)}

userData:
${JSON.stringify(userData, null, 2)}
    `;
  }
});
</script>

</body>
</html>
