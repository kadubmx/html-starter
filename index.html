<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Teste modalBloqueio</title>
  <style>
    body {font-family: system-ui, sans-serif; padding: 30px}
    button {padding: 12px 20px; margin: 4px; border: none; border-radius: 4px; cursor: pointer}
    .abrir  {background:#22c55e; color:#fff}
    .fechar {background:#ef4444; color:#fff}
  </style>
</head>
<body>

  <h3>Disparar modalBloqueio via postMessage</h3>

  <button class="abrir"  onclick="abrir()">ðŸŸ¢ Abrir</button>
  <button class="fechar" onclick="fechar()">ðŸ”´ Fechar</button>

  <script>
    /** Envia a mensagem para a janela-pai (Lowcoder) --------- */
    function abrir () {
      console.log('ðŸ”„ enviando OPEN_MODAL_BLOQUEIO');
      window.parent.postMessage({
        type: 'OPEN_MODAL_BLOQUEIO',   // identificador
        modalId: 'modalBloqueio',      // **nome exportado** no Lowcoder
        payload: { origem: 'iframe', ts: Date.now() }
      }, '*');
    }

    function fechar () {
      console.log('ðŸ”„ enviando CLOSE_MODAL_BLOQUEIO');
      window.parent.postMessage({ type: 'CLOSE_MODAL_BLOQUEIO', modalId: 'modalBloqueio' }, '*');
    }

    /** (opcional) escuta respostas do Lowcoder --------------- */
    window.addEventListener('message', (ev) => {
      if (ev.data?.type === 'MODAL_RESPONSE')
        console.log('ðŸ“¨ resposta Lowcoder:', ev.data);
    });
  </script>

</body>
</html>
